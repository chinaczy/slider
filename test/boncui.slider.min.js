+function(t){"function"==typeof define&&define.amd?define(["jquery"],t):t(jQuery)}(function(t){"use strict";function o(o,e){this.content=t(o),this.contentSubject=null,this.barWrap=null,this.scrollBoxX=null,this.scrollBarX=null,this.scrollBoxY=null,this.scrollBarY=null,this.scaleX=1,this.scaleY=1,this.width=null,this.height=null,this.left=0,this.top=0,this.maxTop=0,this.maxLeft=0,this.settings=t.extend({width:"100%",height:"100%",scrollBoxYWidth:8,scrollBoxXHeight:8,scrollBoxColor:"transparent",scrollBarColor:"#a3becc",gotoTop:"",gotoLeft:""},e),this.init()}if(void 0===t)throw new Error("BoncUI's JavaScript requires jQuery");window.BoncUI=window.BoncUI||function(){},o.prototype={constructor:o,init:function(){this.barWrap=t("<div/>").css({width:this.settings.width,height:this.settings.height,position:"relative",overflow:"hidden"}).addClass("bonc-slider"),this.contentSubject=t("<div/>").addClass("bonc-content-subject"),this.content.before(this.barWrap.append(this.contentSubject)).appendTo(this.contentSubject),this.scrollBoxX=t("<div/>").addClass("bonc-scroll-box-x").css({height:"0",backgroundColor:this.settings.scrollBoxColor}).appendTo(this.barWrap),this.scrollBarX=t("<div/>").addClass("bonc-scroll-bar-x").css({backgroundColor:this.settings.scrollBarColor}).appendTo(this.scrollBoxX),this.scrollBoxY=t("<div/>").addClass("bonc-scroll-box-y").css({width:"0",backgroundColor:this.settings.scrollBoxColor}).appendTo(this.barWrap),this.scrollBarY=t("<div/>").addClass("bonc-scroll-bar-y").css({backgroundColor:this.settings.scrollBarColor}).appendTo(this.scrollBoxY);var o=this;this.content.mouseover(function(){o.scaleX=o.barWrap.innerWidth()/o.content.outerWidth(!0),o.scaleY=o.barWrap.innerHeight()/o.content.outerHeight(!0),o.scaleX>=1?(o.scaleX=1,o.scrollBoxX.css("height","0px"),o.width=null,o.maxLeft=0,o.scrollBarX.css("width",o.width+"px")):(o.scrollBoxX.css("height",o.settings.scrollBoxXHeight+"px"),o.width=o.barWrap.innerWidth()*o.scaleX,o.maxLeft=o.scrollBoxX.outerWidth(!0)-o.width,o.scrollBarX.css("width",o.width+"px"),o.scrollIn(o.scrollBoxX),o.clickBoxX(),o.eventBindX(),o.gotoZero(o.settings.gotoLeft,o.scrollBarX)),o.scaleY>=1?(o.scaleY=1,o.scrollBoxY.css("width","0"),o.height=null,o.maxTop=0,o.scrollBarY.css("height",o.height+"px")):(o.scrollBoxY.css("width",o.settings.scrollBoxYWidth+"px"),o.height=o.barWrap.innerHeight()*o.scaleY,o.maxTop=o.scrollBoxY.outerHeight(!0)-o.height,o.scrollBarY.css("height",o.height+"px"),o.scrollIn(o.scrollBoxY),o.clickBoxY(),o.eventBindY(),o.gotoZero(o.settings.gotoTop,o.scrollBarY),o.goToAnchor())}),this.barWrap.bind("mousewheel",function(){o.wheelEvent()}),navigator.userAgent.indexOf("Firefox")>0&&this.barWrap[0].addEventListener("DOMMouseScroll",function(t){o.wheelEvent(t)},!1)},scrollIn:function(t){function o(){s=window.setInterval(l,1e3)}function e(){t.removeClass("bonc-scroll-fadein"),window.clearInterval(s)}function n(){i=1,t.addClass("bonc-scroll-fadein")}var s,i=0;this.barWrap.hover(o,e),this.barWrap.mousemove(n),this.barWrap.bind("mousewheel",n),navigator.userAgent.indexOf("Firefox")>0&&this.barWrap[0].addEventListener("DOMMouseScroll",n,!1);var l=function(){0==i&&t.removeClass("bonc-scroll-fadein"),i=0}},eventBindX:function(){var o=this;this.scrollBarX.mousedown(function(e){e=e||window.event;var n=e.clientX-t(this).position().left;t(document).mousemove(function(t){t=t||window.event,window.event?window.event.returnValue=!1:t.preventDefault(),o.barWrap.addClass("bonc-no-select"),o.left=t.clientX-n,o.left=Math.max(0,Math.min(o.maxLeft,o.left)),o.contenScrollX()}),t(document).mouseup(function(){o.barWrap.removeClass("bonc-no-select"),t(document).unbind("mousemove"),t(document).unbind("mouseup")})})},eventBindY:function(){var o=this;this.scrollBarY.mousedown(function(e){e=e||window.event;var n=e.clientY-t(this).position().top;t(document).mousemove(function(t){t=t||window.event,window.event?window.event.returnValue=!1:t.preventDefault(),o.barWrap.addClass("bonc-no-select"),o.top=t.clientY-n,o.top=Math.max(0,Math.min(o.maxTop,o.top)),o.contenScrollY()}),t(document).mouseup(function(){o.barWrap.removeClass("bonc-no-select"),t(document).unbind("mousemove"),t(document).unbind("mouseup")})})},clickBoxX:function(){var t=this;this.scrollBoxX.click(function(o){o=o||window.event;var e=t.width;window.event?window.event.returnValue=!1:o.preventDefault(),(o.srcElement||o.target)==t.scrollBoxX[0]&&(t.left=o.offsetX-e/2,t.left=Math.max(0,Math.min(t.maxLeft,t.left)),t.contenScrollX())})},clickBoxY:function(){var t=this;this.scrollBoxY.click(function(o){o=o||window.event;var e=t.height;window.event?window.event.returnValue=!1:o.preventDefault(),(o.srcElement||o.target)==t.scrollBoxY[0]&&(t.top=o.offsetY-e/2,t.top=Math.max(0,Math.min(t.maxTop,t.top)),t.contenScrollY())})},gotoZero:function(o,e){var n=this;o=t(o),o.click(function(){e===n.scrollBarX&&0!=n.left&&(n.scrollBarX.animate({left:0},1e3),n.contentSubject.animate({left:0},1e3),n.left=0),e===n.scrollBarY&&0!=n.top&&(n.scrollBarY.animate({top:0},1e3),n.contentSubject.animate({top:0},1e3),n.top=0)})},goToAnchor:function(){var o=this,e=[],n=[],s=t(document).find("a");t.each(s,function(o,n){void 0!==t(n).attr("name")&&e.push(t(n).attr("name"))}),t.each(e,function(o,e){n.push(t(document).find('a[href="#'+e+'"]'))}),t.each(n,function(e,n){n.click(function(){var e=n.attr("href").substr(1),s=t('a[name="'+e+'"]')||t("#"+e);o.top=o.getTop(s).sum*o.scaleY,o.getTop(s).elemSubject.siblings(".bonc-scroll-box-y").children().css("top",o.top+"px"),o.getTop(s).elemSubject.css("top",-o.top/o.scaleY+"px")})})},getTop:function(t){for(var o=t.offset().top;"bonc-content-subject"!=t.parent().attr("class");)t=t.parent();return{sum:o-t.parent().offset().top,elemSubject:t.parent()}},wheelEvent:function(t){t=t||window.event;var o=this,e=t.wheelDelta||t.detail,n=!0;window.event?window.event.returnValue=!1:t.preventDefault(),n=t.wheelDelta?e<0:e>0,n?o.top+=10:o.top-=10,o.contenScrollY()},contenScrollX:function(){this.left=Math.max(0,Math.min(this.maxLeft,this.left)),this.scrollBarX.css("left",this.left+"px"),this.contentSubject.css("left",-this.left/this.scaleX+"px")},contenScrollY:function(){this.top=Math.max(0,Math.min(this.maxTop,this.top)),this.scrollBarY.css("top",this.top+"px"),this.contentSubject.css("top",-this.top/this.scaleY+"px")}},BoncUI.slider=function(t,e){if(1==t.nodeType)return new o(t,e);throw new Error(t+"不是一个dom对象")}});